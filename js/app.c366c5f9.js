(function(){var t={2596:function(t,e,o){"use strict";var r=o(9242),n=o(7139),s={elevatorsCount:3,floorsCount:6};const a=[];for(let N=0;N<s.elevatorsCount;N++)a.push({state:0,nextFloor:0});const i={elevators:a,queue:[],queueSet:new Set,waitingFloors:new Set,workingFloors:new Set},l={addToQueue:"[ELEVATORS] ADD TO QUEUE",deactivateFloor:"[ELEVATORS] DEACTIVATE FLOOR",elevatorReady:"[ELEVATORS] ELEVATOR READY"},u={[l.addToQueue](t,e){if(e-=1,t.queueSet.has(e))return;let o=null,r=1/0;for(let n of t.elevators){if(n.nextFloor===e)return;console.log(n.nextFloor),n.state===n.nextFloor&&(null===o||Math.abs(n.state-e)<r)&&(o=n,r=Math.abs(n.state-e))}if(t.waitingFloors.add(e+1),!o)return t.queue.push(e),void t.queueSet.add(e);o.nextFloor=e,t.workingFloors.add(e+1)},[l.elevatorReady](t,e){if(t.elevators[e].state=t.elevators[e].nextFloor,t.queueSet.delete(t.elevators[e].nextFloor),t.workingFloors.delete(t.elevators[e].nextFloor+1),t.queue.length>0){const o=t.queue.shift();t.elevators[e].nextFloor=o,t.workingFloors.add(o+1)}},[l.deactivateFloor](t,e){t.waitingFloors.delete(e+1)}};var c={state:i,mutations:u};const v=(0,n.MT)({modules:{elevators:c}});var f=v,d=o(3396);const p={class:"app"};function g(t,e,o,r,n,s){const a=(0,d.up)("app-elevator-manager"),i=(0,d.up)("app-floors");return(0,d.wg)(),(0,d.iD)("main",p,[(0,d.Wm)(a),(0,d.Wm)(i)])}const w={class:"elevators"};function h(t,e,o,r,n,s){const a=(0,d.up)("app-elevator");return(0,d.wg)(),(0,d.iD)("div",w,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(n.elevatorCount,(t=>((0,d.wg)(),(0,d.j4)(a,{number:t-1,key:t},null,8,["number"])))),128))])}var _=o(2268);const m={class:"elevator"},F={class:"elevator__mine"},b={class:"elevator__indicator"},k={class:"elevator__floor"};function x(t,e,o,r,n,s){return(0,d.wg)(),(0,d.iD)("div",m,[(0,d._)("div",F,[(0,d._)("div",{class:(0,_.C_)(["elevator__cabin",{elevator__cabin_resting:n.isRestng}]),style:(0,_.j5)({bottom:n.target*t.percentPerFloor+"%",transition:`bottom ${Math.abs(t.state-n.target)}s linear`,height:`${t.percentPerFloor}%`})},[(0,d._)("div",b,[(0,d._)("div",{style:(0,_.j5)({"-webkit-mask":`url(${t.imageUrl})`}),class:"elevator__icon"},null,4),(0,d._)("span",k,(0,_.zw)(t.nextFloor+1),1)])],6)])])}const O=t=>new Promise((e=>setTimeout(e,t)));var y=O,E={name:"AppElevator",props:{number:{type:Number,required:!0}},data(){return{target:0,isRestng:!1}},computed:{...(0,n.rn)({thisElevator:t=>t.elevators.elevators[(void 0).number],nextFloor:function(t){return t.elevators.elevators[this.number].nextFloor},state:function(t){return t.elevators.elevators[this.number].state},percentPerFloor:()=>100/s.floorsCount,imageUrl(){let t;return t=this.state===this.nextFloor||this.isRestng?"circle":this.state>this.nextFloor?"arrow-down":"arrow-up",o(968)(`./${t}.svg`)}})},watch:{async nextFloor(t){this.target=t,await y(1e3*Math.abs(this.state-this.target)),this.$store.commit(l.deactivateFloor,t),this.isRestng=!0,await y(3e3),this.isRestng=!1,this.$store.commit(l.elevatorReady,this.number)}}},C=o(89);const T=(0,C.Z)(E,[["render",x],["__scopeId","data-v-3f6f6fa7"]]);var A=T,D={name:"AppElevatorManager",components:{AppElevator:A},data(){return{elevatorCount:s.elevatorsCount}}};const R=(0,C.Z)(D,[["render",h],["__scopeId","data-v-059fe619"]]);var j=R;const q={class:"floors"},S={class:"floors__title"},M=["onClick"];function P(t,e,o,r,n,s){return(0,d.wg)(),(0,d.iD)("div",q,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(n.floorCount,(e=>((0,d.wg)(),(0,d.iD)("div",{class:"floors__floor",key:e},[e>1?((0,d.wg)(),(0,d.iD)("div",{key:0,class:"floors__line",style:(0,_.j5)({bottom:s.percentPerFloor*(e-1)+"%"})},null,4)):(0,d.kq)("",!0),(0,d._)("span",S,(0,_.zw)(e),1),(0,d._)("button",{class:(0,_.C_)(["floors__button",{floors__button_active:t.waitingFloors.has(e),floors__button_working:t.workingFloors.has(e)}]),onClick:t=>s.addToQueue(e)},null,10,M)])))),128))])}var $={name:"AppFloors",methods:{addToQueue(t){this.$store.commit(l.addToQueue,t)}},data(){return{floorCount:s.floorsCount}},computed:{...(0,n.rn)({waitingFloors:t=>t.elevators.waitingFloors,workingFloors:t=>t.elevators.workingFloors}),percentPerFloor:()=>100/s.floorsCount}};const L=(0,C.Z)($,[["render",P],["__scopeId","data-v-ff86bd96"]]);var Q=L,U={name:"App",components:{AppElevatorManager:j,AppFloors:Q}};const V=(0,C.Z)(U,[["render",g]]);var I=V;const Z=(0,r.ri)(I);Z.use(f),Z.mount("#app")},968:function(t,e,o){var r={"./arrow-down.svg":4127,"./arrow-up.svg":8770,"./circle.svg":5645};function n(t){var e=s(t);return o(e)}function s(t){if(!o.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=s,t.exports=n,n.id=968},4127:function(t,e,o){"use strict";t.exports=o.p+"img/arrow-down.92f932f9.svg"},8770:function(t,e,o){"use strict";t.exports=o.p+"img/arrow-up.2db8a312.svg"},5645:function(t,e,o){"use strict";t.exports=o.p+"img/circle.81d712e1.svg"}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(e,r,n,s){if(!r){var a=1/0;for(c=0;c<t.length;c++){r=t[c][0],n=t[c][1],s=t[c][2];for(var i=!0,l=0;l<r.length;l++)(!1&s||a>=s)&&Object.keys(o.O).every((function(t){return o.O[t](r[l])}))?r.splice(l--,1):(i=!1,s<a&&(a=s));if(i){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[r,n,s]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.p="/trueconf-test/"}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,s,a=r[0],i=r[1],l=r[2],u=0;if(a.some((function(e){return 0!==t[e]}))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(l)var c=l(o)}for(e&&e(r);u<a.length;u++)s=a[u],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(c)},r=self["webpackChunktest_task"]=self["webpackChunktest_task"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(2596)}));r=o.O(r)})();
//# sourceMappingURL=app.c366c5f9.js.map